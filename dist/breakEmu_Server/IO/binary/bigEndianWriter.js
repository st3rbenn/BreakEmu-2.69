"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _extendedBuffer=require("extended-buffer");function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var BigEndianWriter=exports["default"]=/*#__PURE__*/function(_ExtendedBuffer){_inherits(BigEndianWriter,_ExtendedBuffer);var _super=_createSuper(BigEndianWriter);function BigEndianWriter(options){_classCallCheck(this,BigEndianWriter);return _super.call(this,options);}_createClass(BigEndianWriter,[{key:"writeVarInt",value:function writeVarInt(data){if(data<=BigEndianWriter.MASK_01111111){this.writeByte(data);return;}while(data!==0){var _byte=data&BigEndianWriter.MASK_01111111;data>>=BigEndianWriter.CHUNCK_BIT_SIZE;if(data>0){_byte|=BigEndianWriter.MASK_10000000;}this.writeByte(_byte);}}},{key:"writeVarUInt",value:function writeVarUInt(data){this.writeVarInt(data);}},{key:"writeVarShort",value:function writeVarShort(data){if(data<=BigEndianWriter.MASK_01111111){this.writeByte(data);return;}while(data!==0){var _byte2=data&BigEndianWriter.MASK_01111111;data>>=BigEndianWriter.CHUNCK_BIT_SIZE;if(data>0){_byte2|=BigEndianWriter.MASK_10000000;}this.writeByte(_byte2);}}},{key:"writeVarUShort",value:function writeVarUShort(data){this.writeVarShort(data);}},{key:"writeVarLong",value:function writeVarLong(data){var value=BigInt(data);var low=value&0xffffffffn;var high=value>>32n;if(high===0n){this.writeVarInt(data);return;}for(var i=0;i<4;i++){this.writeByte(Number(low&BigInt(BigEndianWriter.MASK_01111111)|BigInt(BigEndianWriter.MASK_10000000)));low>>=7n;}if((high&0xfffffff8n)===0n){this.writeByte(Number(high<<4n|low));}else{this.writeByte(Number((high<<4n|low)&BigInt(BigEndianWriter.MASK_01111111)|BigInt(BigEndianWriter.MASK_10000000)));high>>=3n;while(high>=0x80n){this.writeByte(Number(high&BigInt(BigEndianWriter.MASK_01111111)|BigInt(BigEndianWriter.MASK_10000000)));high>>=7n;}this.writeByte(Number(high));}}},{key:"writeVarUhLong",value:function writeVarUhLong(data){this.writeVarLong(data);}},{key:"writeByte",value:function writeByte(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeUInt8",this).call(this,data);}},{key:"writeBytes",value:function writeBytes(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeBuffer",this).call(this,Buffer.from(data));}},{key:"writeChar",value:function writeChar(data){this.writeByte(data.charCodeAt(0));}},{key:"writeBoolean",value:function writeBoolean(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeUInt8",this).call(this,data?1:0);}},{key:"writeShort",value:function writeShort(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeInt16BE",this).call(this,data);}},{key:"writeUShort",value:function writeUShort(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeUInt16BE",this).call(this,data);}},{key:"writeInt",value:function writeInt(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeInt32BE",this).call(this,data);}},{key:"writeUInt",value:function writeUInt(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeUInt32BE",this).call(this,data);}},{key:"writeLong",value:function writeLong(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeInt32BE",this).call(this,data);}},{key:"writeULong",value:function writeULong(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeUInt32BE",this).call(this,data);}},{key:"writeFloat",value:function writeFloat(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeFloatBE",this).call(this,data);}},{key:"writeDouble",value:function writeDouble(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeDoubleBE",this).call(this,data);}},{key:"writeUTF",value:function writeUTF(data){this.writeUShort(Buffer.byteLength(data,'utf-8'));_get(_getPrototypeOf(BigEndianWriter.prototype),"writeString",this).call(this,data,'utf-8');}},{key:"writeUTFBytes",value:function writeUTFBytes(data){_get(_getPrototypeOf(BigEndianWriter.prototype),"writeString",this).call(this,data,'utf-8');}},{key:"getBuffer",value:function getBuffer(){return this.buffer;}},{key:"getPointer",value:function getPointer(){return this._pointerEnd-this._pointerStart;}},{key:"setPointer",value:function setPointer(pointer){this._pointerEnd=this._pointerStart+pointer;return this;}}]);return BigEndianWriter;}(_extendedBuffer.ExtendedBuffer);_defineProperty(BigEndianWriter,"CHUNCK_BIT_SIZE",7);_defineProperty(BigEndianWriter,"MASK_10000000",0x80);_defineProperty(BigEndianWriter,"MASK_01111111",0x7f);