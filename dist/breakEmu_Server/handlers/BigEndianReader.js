"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _BinaryReader=_interopRequireDefault(require("./BinaryReader"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var BigEndianReader=/*#__PURE__*/function(){function BigEndianReader(data){_classCallCheck(this,BigEndianReader);this.m_reader=new _BinaryReader["default"](data);}_createClass(BigEndianReader,[{key:"ReadBigEndianBytes",value:function ReadBigEndianBytes(n){var bytes=[];for(var i=0;i<n;i++){bytes.push(this.m_reader.readUInt8());}return bytes;}},{key:"ToSingle",value:function ToSingle(bytes){var sign=bytes[3]>>7&0x1;var exponent=(bytes[3]&0x7f)<<1|bytes[2]>>7;var mantissa=(bytes[2]&0x7f)<<16|bytes[1]<<8|bytes[0];if(exponent===0&&mantissa===0){return 0;}if(exponent===0xff&&mantissa===0){return sign?-Infinity:Infinity;}if(exponent===0xff&&mantissa!==0){return NaN;}return Math.pow(-1,sign)*Math.pow(2,exponent-127)*(1+mantissa/Math.pow(2,23));}},{key:"ToUInt16",value:function ToUInt16(bytes){return bytes.reduce(function(acc,_byte,i){return acc+_byte*Math.pow(256,i);},0);}},{key:"ToUInt32",value:function ToUInt32(bytes){return bytes.reduce(function(acc,_byte2,i){return acc+_byte2*Math.pow(256,i);},0);}},{key:"ToUInt64",value:function ToUInt64(bytes){return bytes.reduce(function(acc,_byte3,i){return acc+_byte3*Math.pow(256,i);},0);}},{key:"Position",get:function get(){return this.m_reader.offset;}},{key:"BytesAvailable",get:function get(){return this.m_reader.bytesAvailable();}},{key:"ReadShort",value:function ReadShort(){return this.ReadBigEndianBytes(2).reduce(function(acc,_byte4,i){return acc+_byte4*Math.pow(256,i);},0);}},{key:"ReadInt",value:function ReadInt(){return this.ReadBigEndianBytes(4).reduce(function(acc,_byte5,i){return acc+_byte5*Math.pow(256,i);},0);}},{key:"ReadLong",value:function ReadLong(){return this.ReadBigEndianBytes(8).reduce(function(acc,_byte6,i){return acc+_byte6*Math.pow(256,i);},0);}},{key:"ReadFloat",value:function ReadFloat(){return this.ToSingle(this.ReadBigEndianBytes(4));}},{key:"ReadUShort",value:function ReadUShort(){return this.ToUInt16(this.ReadBigEndianBytes(2));}},{key:"ReadUInt",value:function ReadUInt(){return this.ToUInt32(this.ReadBigEndianBytes(4));}},{key:"ReadULong",value:function ReadULong(){return this.ToUInt64(this.ReadBigEndianBytes(8));}},{key:"ReadByte",value:function ReadByte(){return this.m_reader.readUInt8();}},{key:"ReadSByte",value:function ReadSByte(){return this.m_reader.readInt8();}},{key:"ReadBytes",value:function ReadBytes(n){return this.m_reader.readBytes(n).toJSON().data;}},{key:"ReadBoolean",value:function ReadBoolean(){return this.m_reader.readUInt8()===1;}},{key:"ReadChar",value:function ReadChar(){return this.m_reader.readUShort().toString();}},{key:"ReadDouble",value:function ReadDouble(){return this.m_reader.readDouble();}},{key:"ReadUTF",value:function ReadUTF(){return this.m_reader.readStringUtf8();}},{key:"ReadUTFBytes",value:function ReadUTFBytes(len){return this.m_reader.readStringUtf8(len);}}]);return BigEndianReader;}();var _default=exports["default"]=BigEndianReader;